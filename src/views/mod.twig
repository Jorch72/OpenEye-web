{% extends 'base.twig' %}
{% block main %}

<h1>{{ modInfo.name }}</h1>
{% if modInfo.description is not empty %}
    <p class="lead">{{ modInfo.description }}</p>
{% endif %}
{% if modInfo.authors|length > 0 %}
    <p><strong>Author{% if modInfo.authors|length > 1 %}s{% endif %}:</strong> {{ modInfo.authors|join(', ') }}</p>
{% endif %}
{% if modInfo.credits is not empty %}
    <p><strong>Credits:</strong> {{ modInfo.credits }}</p>
{% endif %}
{% if modInfo.url is not empty %}
    <p><strong>Url:</strong> <a href="{{ modInfo.url }}" target="_blank">{{ modInfo.url }}</a></p>
{% endif %}

<h2>Versions:</h2>

<div class="row">

    <div class="col-xs-2"> <!-- required for floating -->
        <!-- Nav tabs -->
        <ul class="nav nav-tabs tabs-left">
          {% for version in versions|keys %}
            <li{% if loop.first %} class="active"{% endif %}><a href="#{{ version|id }}" data-toggle="tab">{{ version }}</a></li>
          {% endfor %}
        </ul>
    </div>

    <div class="col-xs-10">
        <!-- Tab panes -->
        <div class="tab-content">
          {% for version, files in versions %}
            <div class="tab-pane{% if loop.first %} active{% endif %}" id="{{ version|id }}">

                <ul class="nav nav-pills" style="margin-bottom: 10px;">
                    <li class="active"><a href="#">Files</a></li>
                    <li><a href="#">Exceptions</a></li>
                    <li><a href="#">Analytics</a></li>
                </ul>

              {% for file in files %}
                <div class="panel panel-default">
                    <div class="panel-heading">{{ file.filenames|first }} ({{ file.size }} bytes)</div>
                    <div class="panel-body">

                        <h4>Signature</h4>
                        {{ file._id }}
                        {% if file.classTransformers|length > 0 %}
                        <h4>Class transformers</h4>
                            {% for transformer in file.classTransformers %}
                                {{ transformer }}<br/>
                            {% endfor %}
                        {% endif%}
                        
                        <h4>Known filenames</h4>
                        <ul>
                        {% for filename in file.filenames %}
                            <li>{{ filename }}</li>
                        {% endfor %}
                        </ul>
                                
                        <h4>Mods included:</h4>
                        <ul>
                        {% for mod in file.mods %}
                            <li>{{ mod.name }} <small>({{ mod.version }})</small></li>
                        {% endfor %}
                        </ul>
                        
                        <div class="panel-group" id="accordion">
                          <div class="panel panel-default">
                            <div class="panel-heading">
                              <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#accordion" href="#packages">
                                  Packages
                                </a>
                              </h4>
                            </div>
                            <div id="packages" class="panel-collapse collapse in">
                              <div class="panel-body">
                                <ul>
                                {% for package in file.packages|sort %}
                                    <li><a href="{{ relative('package/' ~ package) }}">{{ package }}</a></li>
                                {% endfor %}
                                </ul>
                              </div>
                            </div>
                          </div>
                        </div>

                    </div>
                </div>
              {% endfor %}
            </div>
          {% endfor %}
        </div>
    </div>

</div>
{% endblock %}